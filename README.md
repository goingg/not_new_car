# 车淘淘二手车项目

## 项目简介

车淘淘是一个基于Python Flask框架开发的二手车交易平台，具备车辆信息展示、数据爬取、
用户认证和市场数据分析等功能。系统从第三方平台爬取真实二手车数据，包括车辆基本信息、价格、图片等，
并提供可视化分析功能。

## 项目结构
```
car/
    app.py           # 主入口，Flask 路由与页面逻辑
    database.py      # 数据库连接与操作
    spider.py        # 爬虫采集与图片上传
    analysis.py    # 统计分析逻辑
    utils.py         # 工具函数与统一配置
    car_img/         # 本地图片存储
    templates/       # 前端页面模板
          /index.html        # 首页
          /detail.html       # 详情页
          /statistics.html   # 数据分析页
          /login.html        # 登录页
          /register.html     # 注册页
README.md            # 项目说明
requirements.txt     # 依赖列表
clear_oss.py         # 代码清理说明
```

## 环境要求
- Python 3.8+
- MySQL 数据库
- 推荐使用 Windows 环境

## 安装依赖
```bash
pip install -r requirements.txt
```

## 数据库初始化
系统会自动创建数据库和数据表，无需手动创建。默认使用以下配置：
- 主机：localhost
- 端口：3306
- 用户名：root
- 密码：1234
- 数据库名：car

## 数据采集
```bash
python car/spider.py
```
爬虫会自动爬取前50页的二手车数据（可配置），包括：
- 车辆名称、价格、年份和里程
- 车辆详细参数信息（上牌时间、变速箱、排量等）
- 车辆图片并上传至七牛云存储

## 启动服务
```bash
python car/app.py
```
启动后访问 http://localhost:5000 查看网站

## 核心功能

### 用户系统
- 用户注册与登录功能
- 会话管理与权限控制
- 未登录用户限制访问数据分析页面与AI功能

### 二手车信息展示
- 首页：展示热门推荐车辆和轮播图
- 列表页：分页展示二手车列表（含品牌、型号、年份、价格、图片等），支持按价格区间筛选（10 万以下 / 10-20 万 / 20-30 万等）
- 详情页：展示单辆车完整信息，包括：
  - 基础信息（型号、品牌、上牌时间、里程等）
  - 配置参数（变速箱、排量、燃油类型、驱动方式等）
  - 检测报告（外观、内饰、发动机、事故记录等）
  - 车辆描述及"联系销售""预约看车"功能按钮

### 市场数据分析
- 可视化图表：
  - 品牌分布饼图（展示各品牌车辆数量占比）
  - 价格趋势折线图（2018-2023 年平均价格变化）
  - 价格区间分布（按 10 万以下 / 10-20 万等区间展示车辆数量）

### 数据爬取与处理
- 从第三方平台爬取车辆信息（名称、价格、年份、里程、图片等），并对特殊字符进行安全处理（如`safe_name`函数过滤非法字符）
- 数据存储：文字信息存入 MySQL 数据库，图片上传至七牛云存储

## 技术实现细节

### 后端技术
- 框架：Python + Flask
- 数据库：MySQL，通过`database.py`实现数据交互
- 数据可视化：使用`pyecharts`生成饼图、折线图

### 前端技术
- 页面布局：HTML + CSS
- 图标：Font Awesome

### 数据爬取
- 工具：requests（网络请求）、BeautifulSoup（页面解析）

## 业务流程

### 数据采集
1. 运行爬虫脚本，自动创建数据库和表结构
2. 爬虫多线程爬取第三方平台二手车数据
3. 文字信息经处理后写入 MySQL 数据库
4. 图片下载到本地并上传至七牛云存储

### 用户浏览
- 用户访问首页/列表页，通过分页功能浏览车辆列表，可按价格区间筛选
- 点击车辆进入详情页，查看完整信息并发起咨询或预约

### 数据分析
- 用户访问数据分析页，后端通过`get_statistics_data`从数据库获取统计数据
- 调用`create_charts`生成可视化图表，前端渲染展示

### 用户认证
- 新用户通过注册页面创建账户
- 已注册用户通过登录页面验证身份
- 登录后可访问受保护的页面（如数据分析页面）

